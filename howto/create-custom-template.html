<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta content="How to create a project template for BASIS, a build system and software implementation standard." name="description" />

    <title>Create a Custom Template &mdash; BASIS</title>
    
    <link rel="stylesheet" href="../_static/readable.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     'b2013.12.23 (15:17 UTC)',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="BASIS" href="../index.html" />
    <link rel="up" title="How-to Guides" href="../howto.html" />
    <link rel="next" title="Managing Test Data" href="manage-data.html" />
    <link rel="prev" title="Create/Modify a Project" href="create-and-modify-project.html" />
   
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body>
  
  

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="manage-data.html" title="Managing Test Data"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="create-and-modify-project.html" title="Create/Modify a Project"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">BASIS</a> &raquo;</li>
          <li><a href="../howto.html" accesskey="U">How-to Guides</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="create-a-custom-template">
<h1>Create a Custom Template<a class="headerlink" href="#create-a-custom-template" title="Permalink to this headline">¶</a></h1>
<p>In addition to creating new projects from an existing project template,
the <tt class="docutils literal"><span class="pre">basisproject</span></tt> command-line tool can also be used to generate a new
<a class="reference internal" href="../standard/template.html"><em>BASIS Project Template</em></a> customized for your needs.</p>
<p>For a detailed description and overview of the available command options,
please refer to the output of the following command:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">basisproject</span> <span class="o">--</span><span class="n">help</span>
</pre></div>
</div>
<div class="section" id="create-a-new-template">
<span id="howtocreateatemplate"></span><h2>Create a New Template<a class="headerlink" href="#create-a-new-template" title="Permalink to this headline">¶</a></h2>
<p>The fastest way to create a new template is to call <tt class="docutils literal"><span class="pre">basisproject</span></tt> with the name
of the new template and the option <tt class="docutils literal"><span class="pre">--new-template</span></tt>:</p>
<div class="highlight-bash"><div class="highlight"><pre>basisproject --name MyTemplate --new-template
</pre></div>
</div>
<p>This will create a subdirectory called <tt class="docutils literal"><span class="pre">MyTemplate/1.0</span></tt> under the current working directory
and populate it with the current default project template structure and BASIS configuration.
With this you can modify the the default substitutions and file contents for your needs, and
create new versions so that users can update their source tree automatically as you improve
and update your customized template.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Use the template options of the existing template to specify which features
of this template to copy when creating the new template.</p>
</div>
</div>
<div class="section" id="use-a-custom-template">
<span id="howtouseatemplate"></span><h2>Use a Custom Template<a class="headerlink" href="#use-a-custom-template" title="Permalink to this headline">¶</a></h2>
<p>To use a custom template that you have created, specify the path to the template including the
version subdirectory as part of the <tt class="docutils literal"><span class="pre">basisproject</span></tt> command as follows:</p>
<div class="highlight-bash"><div class="highlight"><pre>basisproject --name MyProject --template path/to/MyTemplate/1.0
</pre></div>
</div>
<p>Other than that you can use your custom template in the same manner as described in
<a class="reference internal" href="create-and-modify-project.html"><em>The How-To on Creating and Modifying a Project</em></a>.</p>
<div class="section" id="make-custom-template-the-default">
<h3>Make Custom Template the Default<a class="headerlink" href="#make-custom-template-the-default" title="Permalink to this headline">¶</a></h3>
<p>During the installation of BASIS, it is possible to specify a custom template as the default
used by <tt class="docutils literal"><span class="pre">basisproject</span></tt> when called without the <tt class="docutils literal"><span class="pre">--template</span></tt> argument.
See the <a class="reference internal" href="../install.html#basisinstallationoptions"><em>CMake Options</em></a> for details.</p>
</div>
</div>
<div class="section" id="template-layout">
<span id="templatelayout"></span><h2>Template Layout<a class="headerlink" href="#template-layout" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><pre>- template_name/
    - 1.0/
        + _config.py
        + src/
        + config/
        + data/
        + doc/
        + example/
        + modules/
        + test/
    - 1.1/
    - 2.0/
    - 2.1/
    - .../</pre>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Only the files which were modified or added have to be present in the new template.
The <tt class="docutils literal"><span class="pre">basisproject</span></tt> tool will look in older template directories for any missing files.</p>
</div>
<div class="section" id="template-versions">
<h3>Template Versions<a class="headerlink" href="#template-versions" title="Permalink to this headline">¶</a></h3>
<p>The template system is designed to help automate updates of existing libraries to new template versions.
Whenever a template file is modified or removed, the previous project template has to be copied to a
new directory with an updated template version! Otherwise, the three-way diff merge used by the
<tt class="docutils literal"><span class="pre">basisproject</span></tt> tool to update existing projects to this newer template will fail.</p>
</div>
</div>
<div class="section" id="custom-substitutions">
<h2>Custom Substitutions<a class="headerlink" href="#custom-substitutions" title="Permalink to this headline">¶</a></h2>
<p>The template configuration file named <tt class="docutils literal"><span class="pre">_config.py</span></tt> and located in the top directory of each project
template defines not only which files constitute a project, but also the available substitution parameters
and defaults used by <tt class="docutils literal"><span class="pre">basisproject</span></tt>. It requires a basic understanding of the Python syntax, but is
fairly easy to understand even without much experience in using Python given the following example.</p>
<div class="highlight-python"><pre># project template configuration script for basisproject tool

# ------------------------------------------------------------------------------
# required project files
required = [
  'AUTHORS.txt',
  'README.txt',
  'INSTALL.txt',
  'COPYING.txt',
  'CMakeLists.txt',
  'BasisProject.cmake'
]

# ------------------------------------------------------------------------------
# optional project files
options = {
  'config-settings' : {
    'desc' : 'Include/exclude custom Settings.cmake file.',
    'path' : [ 'config/Settings.cmake' ]
  },
  'config' : {
    'desc' : 'Include/exclude all custom configuration files.',
    'deps' : [
               'config-settings'
             ]
  },
  'data' : {
    'desc' : 'Add/remove directory for auxiliary data files.',
    'path' : [ 'data/CMakeLists.txt' ]
  }
}

# ------------------------------------------------------------------------------
# preset template options
presets = {
  'minimal' : {
    'desc' : 'Choose minimal project template.',
    'args' : [ 'src' ]
  },
  'default' : {
    'desc' : 'Choose default project template.',
    'args' : [ 'doc', 'doc-rst', 'example', 'include', 'src', 'test' ]
  },
  'toplevel' : {
    'desc' : 'Create toplevel project.',
    'args' : [ 'doc', 'doc-rst', 'example', 'modules' ]
  },
  'module' : {
    'desc' : 'Create module of toplevel project.',
    'args' : [ 'include',   'src',   'test' ]
  }
}

# ------------------------------------------------------------------------------
# additional substitutions besides &lt;project&gt;, &lt;template&gt;,...
from datetime import datetime as date

substitutions = {
  # fixed computed substitutions
  'date'  : date.today().strftime('%x'),
  'day'   : date.today().day,
  'month' : date.today().month,
  'year'  : date.today().year,
  # substitutions which can be overridden using a command option
  'vendor' : {
    'help'    : "Package vendor ID (e.g., acronym of provider and/or division).",
    'default' : "SBIA"
  },
  'copyright' : {
    'help'    : "Copyrigth statement optionally including years, but not \". All rights reserved.\".",
    'default' : str(date.today().year) + " University of Pennsylvania"
  },
  'license' : {
    'help'    : "Copyrigth statement including years, but excluding \"All rights reserved.\".",
    'default' : "See http://www.rad.upenn.edu/sbia/software/license.html or COPYING file."
  },
  'contact' : {
    'help'    : "Package contact information.",
    'default' : "SBIA Group &lt;sbia-software at uphs.upenn.edu&gt;"
  }</pre>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/logo_title.svg" alt="Logo"/>
            </a></p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
<h3><a href="../index.html">Table Of Contents</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">BASIS Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contents.html">Contents</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html#tutorials">Tutorials</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../howto.html">How-to Guides</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="create-and-modify-project.html">Create/Modify a Project</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Create a Custom Template</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#create-a-new-template">Create a New Template</a></li>
<li class="toctree-l3"><a class="reference internal" href="#use-a-custom-template">Use a Custom Template</a></li>
<li class="toctree-l3"><a class="reference internal" href="#template-layout">Template Layout</a></li>
<li class="toctree-l3"><a class="reference internal" href="#custom-substitutions">Custom Substitutions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="manage-data.html">Managing Test Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="document.html">Documenting Software</a></li>
<li class="toctree-l2"><a class="reference internal" href="branch-and-release.html">Branch and Release</a></li>
<li class="toctree-l2"><a class="reference internal" href="package.html">Packaging Software</a></li>
<li class="toctree-l2"><a class="reference internal" href="buildoptions.html">CMake Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="buildoptions.html#advanced-cmake-options">Advanced CMake Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="run-automated-tests.html">Automated Testing</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../standard.html">Standards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../apidoc.html">API Reference</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../download.html">Download</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../help.html">Help</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changes</a></li>
</ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
  <div class="footer">
    &copy; Copyright 2011, 2012 University of Pennsylvania, 2013 Andreas Schuh, 2013 Carnegie Mellon University.
    Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.1.2.
  </div>
  
  </body>
</html>