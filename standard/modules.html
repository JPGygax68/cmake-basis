<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta content="This article details the project modularization implemented by BASIS, a build system and software implementation standard." name="description" />

    <title>Project Modularization &mdash; BASIS</title>
    
    <link rel="stylesheet" href="../_static/readable.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     'b2014.01.05 (16:07 UTC)',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="BASIS" href="../index.html" />
    <link rel="up" title="Standards" href="../standard.html" />
    <link rel="next" title="Build of Script Targets" href="scripttargets.html" />
    <link rel="prev" title="BASIS Project Template" href="template.html" />
   
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body>
  
  

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="scripttargets.html" title="Build of Script Targets"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="template.html" title="BASIS Project Template"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">BASIS</a> &raquo;</li>
          <li><a href="../contents.html" >Table of Contents</a> &raquo;</li>
          <li><a href="../standard.html" accesskey="U">Standards</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="project-modularization">
<h1>Project Modularization<a class="headerlink" href="#project-modularization" title="Permalink to this headline">¶</a></h1>
<p>This article details the design and implementation of the project
modularization, where a project, also referred to as top-level project
(note that BASIS only allows one level of submodularization),
can have other projects as subprojects (referred to as modules in this
context to distinguish them from the superproject/subproject relationship
in case of the superbuild approach, see below).
The project modules are conceptual cohesive groups of the project files.</p>
<p>A top-level project can also be described as a modularized project,
where each module of this project may depend on other modules of the
same project or external projects (also referred to as packages).
Note that an external project can also be another top-level project which
utilizes the same project modularization as discussed herein.
The idea, and partly the CMake implementation, has been borrowed from the
<a class="reference external" href="http://www.itk.org/Wiki/ITK_Release_4">ITK 4</a> project. See the Wiki of this project for details on the
<a class="reference external" href="http://www.vtk.org/Wiki/ITK_Release_4/Modularization">ITK 4 Modularization</a>.</p>
<div class="section" id="implementation">
<h2>Implementation<a class="headerlink" href="#implementation" title="Permalink to this headline">¶</a></h2>
<p>The modularization is mainly implemented by the <a class="reference external" href="http://opensource.andreasschuh.com/cmake-basis/apidoc/latest/ProjectTools_8cmake.html">ProjectTools.cmake</a>
module, in particular, the <a class="reference external" href="http://opensource.andreasschuh.com/cmake-basis/apidoc/latest/group__CMakeUtilities.html#gadc15bedde27fe73c74a7f0f56b1c36d1">basis_project_modules()</a> function which is
called at the very top of the <a class="reference external" href="http://opensource.andreasschuh.com/cmake-basis/apidoc/latest/group__CMakeAPI.html#ga127b37093051faec042f572ac7fde9ed">basis_project_impl()</a> macro, which is
the foundation for the root CMake configuration file (<tt class="docutils literal"><span class="pre">CMakeLists.txt</span></tt>) of
every BASIS project. The <a class="reference external" href="http://opensource.andreasschuh.com/cmake-basis/apidoc/latest/group__CMakeUtilities.html#gadc15bedde27fe73c74a7f0f56b1c36d1">basis_project_modules()</a> function searches
the subdirectories in the <tt class="docutils literal"><span class="pre">modules/</span></tt> directory for the presence of the
<a class="reference external" href="http://opensource.andreasschuh.com/cmake-basis/apidoc/latest/BasisProject_8cmake.html">BasisProject.cmake</a> file. It then loads this file, to retrieve the
meta-data of each module, i.e., its name and dependencies. It then adds for
each module a <tt class="docutils literal"><span class="pre">MODULE_&lt;module&gt;</span></tt> option to the build configuration. When this
option is set to <tt class="docutils literal"><span class="pre">OFF</span></tt>, the module is excluded from both the project build
and any package generated by <a class="reference external" href="http://www.cmake.org/cmake/help/v2.8.8/cpack.html">CPack</a>. Otherwise, if it is set to <tt class="docutils literal"><span class="pre">ON</span></tt>,
the module is build as part of the top-level project. These options are
superceded by the <tt class="docutils literal"><span class="pre">BUILD_ALL_MODULES</span></tt> option if this option is set to <tt class="docutils literal"><span class="pre">ON</span></tt>,
however.</p>
<p>Besides adding these options, the <a class="reference external" href="http://opensource.andreasschuh.com/cmake-basis/apidoc/latest/group__CMakeUtilities.html#gadc15bedde27fe73c74a7f0f56b1c36d1">basis_project_modules()</a>
function ensures that the modules are configured and build in the right order,
such that a module which is needed by another module is build prior to this
dependent module. Moreover, it helps the <a class="reference external" href="http://opensource.andreasschuh.com/cmake-basis/apidoc/latest/group__CMakeAPI.html#gac9a1326ff8b06b17aebbb6b852ca73af">basis_find_package()</a> function
to find the other modules, in particular their configured package configuration
files, which are either generated from the default
<a class="reference external" href="http://opensource.andreasschuh.com/cmake-basis/apidoc/latest/BASISConfig_8cmake.html">Config.cmake.in</a> file or a corresponding file found
in the <tt class="docutils literal"><span class="pre">config/</span></tt> directory of each module.</p>
<p>The other BASIS CMake functions may further change their actual behaviour
depending on the <tt class="docutils literal"><span class="pre">PROJECT_IS_MODULE</span></tt> variable which specifies whether the
project that is currently being configured is a module of another project
(i.e., <tt class="docutils literal"><span class="pre">PROJECT_IS_MODULE</span></tt> is <tt class="docutils literal"><span class="pre">TRUE</span></tt>) or a top-level project
(i.e., <tt class="docutils literal"><span class="pre">PROJECT_IS_MODULE</span></tt> is <tt class="docutils literal"><span class="pre">FALSE</span></tt>).</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/logo_title.svg" alt="Logo"/>
            </a></p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
<h3><a href="../index.html">Table Of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../howto.html">How-to Guides</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../standard.html">Standards</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../standard.html#build-system-standard">Build System Standard</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="fhs.html">Filesystem Hierarchy Standard</a></li>
<li class="toctree-l3"><a class="reference internal" href="template.html">BASIS Project Template</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="">Project Modularization</a></li>
<li class="toctree-l3"><a class="reference internal" href="scripttargets.html">Build of Script Targets</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../standard.html#implementation-standard">Implementation Standard</a></li>
<li class="toctree-l2"><a class="reference internal" href="../standard.html#style-guides">Style Guides</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../apidoc.html">API Reference</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../download.html">Download</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../help.html">Help</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../contents.html">Page Contents</a></li>
</ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
  <div class="footer">
    &copy; Copyright 2011, 2012 University of Pennsylvania, 2013 Andreas Schuh, 2013 Carnegie Mellon University.
    Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.1.2.
  </div>
  
  </body>
</html>