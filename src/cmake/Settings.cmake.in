##############################################################################
# @file  @PROJECT_NAME@Settings.cmake
# @brief BASIS configuration and default CMake settings used by projects.
#
# @note The file @PROJECT_NAME@Settings.cmake is automatically generated by
#       BASIS from the template file Settings.cmake.in which is part of the
#       BASIS installation.
#
# This module defines global CMake constants and variables which are used
# by the BASIS CMake functions and macros. Hence, these values can be used
# to configure the behavior of these functions to some extent without the
# need to modify the functions themselves.
#
# @attention Be careful when caching any of the variables. Usually, this
#            file is included in the root CMake configuration file of the
#            project which may also be a module of another project and hence
#            may overwrite this project's settings. For project-wide variables
#            which are modified by the BASIS functions consider the use of
#            so-called project properties as implemented by the BASIS functions
#            basis_set_project_property() and basis_get_project_property().
#
# Variables in this file which are only set if not set previously, i.e.,
# by using basis_set_if_empty(), are set when this file is included the first
# time by a project, but not changed when it is included by a module of this
# project. This is important in order to merge the module's output files with
# the files of the project it is part of.
#
# @note As this file also sets the CMake policies to be used, it has to
#       be included using the @c NO_POLICY_SCOPE in order for these policies
#       to take effect also in the including file and its subdirectories.
#
# Copyright (c) 2011 University of Pennsylvania. All rights reserved.
# See https://www.rad.upenn.edu/sbia/software/license.html or COPYING file.
#
# Contact: SBIA Group <sbia-software at uphs.upenn.edu>
#
# @ingroup CMakeTools
##############################################################################

# ============================================================================
# CMake version and policies
# ============================================================================

cmake_minimum_required (VERSION 2.8.4)

# Add policies introduced with CMake versions newer than the one specified
# above. These policies would otherwise trigger a policy not set warning by
# newer CMake versions.

if (POLICY CMP0016)
  cmake_policy (SET CMP0016 NEW)
endif ()

if (POLICY CMP0017)
  cmake_policy (SET CMP0017 NEW)
endif ()

# ============================================================================
# system checks
# ============================================================================

# used by tests to disable these checks
if (NOT BASIS_NO_SYSTEM_CHECKS)
  include (CheckTypeSize)
  include (CheckIncludeFile)

  # check if type long long is supported
  CHECK_TYPE_SIZE ("long long" LONG_LONG)

  if (HAVE_LONG_LONG)
    set (HAVE_LONG_LONG 1)
  else ()
    set (HAVE_LONG_LONG 0)
  endif ()

  # check for presence of sstream header
  include (TestForSSTREAM)

  if (CMAKE_NO_ANSI_STRING_STREAM)
    set (HAVE_SSTREAM 0)
  else ()
    set (HAVE_SSTREAM 1)
  endif ()

  # check if tr/tuple header file is available
  CHECK_INCLUDE_FILE ("tr1/tuple" HAVE_TR1_TUPLE)

  if (HAVE_TR1_TUPLE)
    set (HAVE_TR1_TUPLE 1)
  else ()
    set (HAVE_TR1_TUPLE 0)
  endif ()

  # check for availibility of pthreads library
  # defines CMAKE_USE_PTHREADS_INIT and CMAKE_THREAD_LIBS_INIT
  find_package (Threads)

  if (Threads_FOUND)
    if (CMAKE_USE_PTHREADS_INIT)
      set (HAVE_PTHREAD 1)
    else  ()
      set (HAVE_PTHREAD 0)
    endif ()
  endif ()
endif ()


# ============================================================================
# constants and global settings
# ============================================================================

## @addtogroup CMakeUtilities
#  @{


## @brief List of names used for special purpose targets.
#
# Contains a list of target names that are used by the BASIS functions for
# special purposes and are hence not to be used for project targets.
set (
  BASIS_RESERVED_TARGET_NAMES
    "all"
    "bundle"
    "bundle_source"
    "changelog"
    "clean"
    "depend"
    "doc"
    "headers"
    "headers_check"
    "package"
    "package_source"
    "scripts"
    "test"
    "uninstall"
)

## @brief Default component used for library targets when no component is specified.
#
# The default component a library target and its auxiliary files
# are associated with if no component was specified, explicitly.
set (BASIS_LIBRARY_COMPONENT "Development")

## @brief Default component used for executables when no component is specified.
#
# The default component an executable target and its auxiliary files
# are associated with if no component was specified, explicitly.
set (BASIS_RUNTIME_COMPONENT "Runtime")

## @brief Specifies that the BASIS C++ utilities shall by default not be added
#         as dependency of an executable.
set (BASIS_NO_BASIS_UTILITIES FALSE)

## @brief Script used to execute a process in CMake script mode.
#
# In order to be able to assign a timeout to the execution of a custom command
# and to add some error message parsing, this script is used by some build
# rules to actually perform the build step. See for example, the build of
# executables using the MATLAB Compiler.
set (BASIS_SCRIPT_EXECUTE_PROCESS "${BASIS_MODULE_PATH}/ExecuteProcess.cmake")

## @brief Default script configuration template.
#
# This is the default template used by basis_add_script() to configure the
# script during the build step. If the file
# @c PROJECT_CONFIG_DIR/ScriptConfig.cmake.in exists, the value of this variable
# is set to its path by basis_project_initialize().
set (BASIS_SCRIPT_CONFIG_FILE "${BASIS_MODULE_PATH}/ScriptConfig.cmake.in")

## @brief File used by default as <tt>--authors</tt> file to <tt>svn2cl</tt>.
#
# This file lists all Subversion users at SBIA and is used by default for
# the mapping of Subversion user names to real names during the generation
# of changelogs.
set (BASIS_SVN_USERS_FILE "${BASIS_MODULE_PATH}/SubversionUsers.txt")

# ----------------------------------------------------------------------------
# namespace

## @brief Whether BASIS shall use fully-qualified target UIDs.
#
# If this option is OFF, the namespace of the top-level BASIS project is
# not prepended to the actual CMake build target names.
#
# For example, instead of the fully-qualified target UID
# "sbia.@PROJECT_NAME_LOWER@.target", the CMake target name will simply
# be "target". Only when the target is referenced from another project,
# the fully-qualified target UID is usually required.
set (BASIS_USE_FULLY_QUALIFIED_UIDS OFF CACHE INTERNAL "")

## @brief Global namespace of BASIS projects.
set (BASIS_NAMESPACE "SBIA")
string (TOLOWER "${BASIS_NAMESPACE}" BASIS_NAMESPACE_LOWER)
string (TOUPPER "${BASIS_NAMESPACE}" BASIS_NAMESPACE_UPPER)

## @brief CMake namespace of top-level project.
#
# This is the common namespace of a BASIS project and its modules.
# It is the part of the namespace which is only required if the project's
# targets are referenced from another project, but not within the project.
if (NOT PROJECT_IS_MODULE)
  if (BASIS_NAMESPACE)
    set (BASIS_PROJECT_NAMESPACE_CMAKE "${BASIS_NAMESPACE_LOWER}.@PROJECT_NAME_LOWER@")
  else ()
    set (BASIS_PROJECT_NAMESPACE_CMAKE "@PROJECT_NAME_LOWER@")
  endif ()
endif ()
basis_sanitize_for_regex (
  BASIS_PROJECT_NAMESPACE_CMAKE_REGEX "${BASIS_PROJECT_NAMESPACE_CMAKE}"
)

## @brief CMake namespace of project.
#
# The CMake namespace of a BASIS project is made up of its name in lower case
# only as well as the namespace the project belongs to, i.e., the namespace of
# the project this project is a module of.
#
# Example:
# @code
# basis_make_target_uid(TARGET_UID "mycmd")
# # sets TARGET_UID to "sbia.@PROJECT_NAME_LOWER@.mycmd"
# @endcode
#
# @sa basis_make_target_uid()
# @sa basis_get_target_uid()
# @sa basis_make_test_uid()
# @sa basis_get_test_uid()
if (NOT PROJECT_IS_MODULE)
  set (PROJECT_NAMESPACE_CMAKE "${BASIS_PROJECT_NAMESPACE_CMAKE}")
else ()
  set (PROJECT_NAMESPACE_CMAKE "${PROJECT_NAMESPACE_CMAKE}.@PROJECT_NAME_LOWER@")
endif ()
basis_sanitize_for_regex (PROJECT_NAMESPACE_CMAKE_REGEX "${PROJECT_NAMESPACE_CMAKE}")

## @brief C++ namespace of project.
#
# The C++ namespace of a BASIS project is made up of its name in lower case
# only as well as the namespace the project it belongs to, i.e., the namespace of
# the project this project is a module of.
#
# Example:
# @code
# namespace sbia {
# namespace @PROJECT_NAME_LOWER@ {
# // your code goes here
# }
# }
# @endcode
#
# @ingroup BasisCxxUtilities
if (NOT PROJECT_IS_MODULE)
  if (BASIS_NAMESPACE)
    set (PROJECT_NAMESPACE_CXX "${BASIS_NAMESPACE_LOWER}::@PROJECT_NAME_LOWER@")
  else ()
    set (PROJECT_NAMESPACE_CXX "@PROJECT_NAME_LOWER@")
  endif ()
else ()
  set (PROJECT_NAMESPACE_CXX "${PROJECT_NAMESPACE_CXX}::@PROJECT_NAME_LOWER@")
endif ()

## @brief Java package name of project.
#
# The Java package name of a BASIS project is made up of its name in lower case
# only as well as the package name of the project it belongs to.
#
# Example:
# @code
# package sbia.@PROJECT_NAME_LOWER@;
# @endcode
#
# @ingroup BasisJavaUtilities
if (NOT PROJECT_IS_MODULE)
  if (BASIS_NAMESPACE)
    set (PROJECT_NAMESPACE_JAVA "${BASIS_NAMESPACE_LOWER}.@PROJECT_NAME_LOWER@")
  else ()
    set (PROJECT_NAMESPACE_JAVA "@PROJECT_NAME_LOWER@")
  endif ()
else ()
  set (PROJECT_NAMESPACE_JAVA "${PROJECT_NAMESPACE_JAVA}.@PROJECT_NAME_LOWER@")
endif ()

## @brief Python package name of project.
#
# The Python package name of a BASIS project is made up of its name in lower case
# only as well as the package name of the project it belongs to.
#
# Example:
# @code
# import sbia.@PROJECT_NAME_LOWER@
# @endcode
#
# @ingroup BasisPythonUtilities
if (NOT PROJECT_IS_MODULE)
  if (BASIS_NAMESPACE)
    set (PROJECT_NAMESPACE_PYTHON "${BASIS_NAMESPACE_LOWER}.@PROJECT_NAME_LOWER@")
  else ()
    set (PROJECT_NAMESPACE_PYTHON "@PROJECT_NAME_LOWER@")
  endif ()
else ()
  set (PROJECT_NAMESPACE_PYTHON "${PROJECT_NAMESPACE_PYTHON}.@PROJECT_NAME_LOWER@")
endif ()

## @brief Perl package name of project.
#
# The Perl package name of a BASIS project is made up of the project name which
# must be either all capital letters or mixed case starting with a captital letter.
# Note that Perl informally reserves lowercase module names for "pragma" modules
# such as <tt>integer</tt> and <tt>strict</tt>.
#
# Example:
# @code
# package SBIA::@PROJECT_NAME@;
# @endcode
#
# @ingroup BasisPerlUtilities
if (NOT PROJECT_IS_MODULE)
  if (BASIS_NAMESPACE)
    set (PROJECT_NAMESPACE_PERL "${BASIS_NAMESPACE}::@PROJECT_NAME@")
  else ()
    set (PROJECT_NAMESPACE_PERL "@PROJECT_NAME@")
  endif ()
else ()
  set (PROJECT_NAMESPACE_PERL "${PROJECT_NAMESPACE_PERL}::@PROJECT_NAME@")
endif ()

## @brief BASH namespace of project.
#
# In BASH, there exists no such concept of a namespace or package. However,
# variable and function names defined in a module which is supposed to be
# sourced by other BASH scripts should use a unique prefix for variable and
# function names.
#
# The BASH module namespace of a BASIS project is made up of its name in upper
# case only to distinguish it from the actual variable or function name as well
# as the namespace of the project it belongs to.
#
# Example:
# @code
# # The project's namespace is SBIA_BASIS and the name of the module in this
# # example is shflags.sh. This gives the fully-qualified module namespace
# # SBIA_BASIS_SHFLAGS. Note that private identifiers are further prefixed
# # with an underscore '_'.
#
# # return if already loaded
# [ "${_SBIA_@PROJECT_NAME_UPPER@_MYMODULE_INCLUDED:-0}" -eq 1 ] && return 0
# _SBIA_@PROJECT_NAME_UPPER@_MYMODULE_INCLUDED=1
#
# # define private global variable
# _SBIA_@PROJECT_NAME_UPPER@_MYMODULE_verbose=0
#
# # define public function
# #
# # Note: To not complicate the use of the module, the name must not necessarily
# #       include the fully-qualified namespace identifier, but the name should
# #       chosen carefully to avoid name conflicts with other modules.
# MYMODULE_string()
# {
#     # ...
# }
# @endcode
#
# @ingroup BasisBashUtilities
if (NOT PROJECT_IS_MODULE)
  if (BASIS_NAMESPACE)
    set (PROJECT_NAMESPACE_BASH "${BASIS_NAMESPACE_UPPER}_@PROJECT_NAME_UPPER@")
  else ()
    set (PROJECT_NAMESPACE_BASH "@PROJECT_NAME_UPPER@")
  endif ()
else ()
  set (PROJECT_NAMESPACE_BASH "${PROJECT_NAMESPACE_BASH}_@PROJECT_NAME_UPPER@")
endif ()

## @brief MATLAB package name of project.
#
# The MATLAB package name of a BASIS project is made up of its name in lower case
# only as well as the package name of the project it belongs to.
#
# For information on MATLAB's package and class folders, visit the following
# web page from MathWorks:
# @sa http://www.mathworks.com/help/techdoc/matlab_oop/brfynt_-1.html
#
# Example:
# @code
# import sbia.@PROJECT_NAME_LOWER@.cls
# @endcode
#
# @ingroup BasisMatlabUtilities
if (NOT PROJECT_IS_MODULE)
  if (BASIS_NAMESPACE)
    set (PROJECT_NAMESPACE_MATLAB "${BASIS_NAMESPACE_LOWER}.@PROJECT_NAME_LOWER@")
  else ()
    set (PROJECT_NAMESPACE_MATLAB "@PROJECT_NAME_LOWER@")
  endif ()
else ()
  set (PROJECT_NAMESPACE_MATLAB "${PROJECT_NAMESPACE_MATLAB}.@PROJECT_NAME_LOWER@")
endif ()

## @brief Prefix for public header files.
#
# The prefix used for the output directory of the configured public header
# files in the build tree and the installation of these under the
# @c INSTALL_INCLUDE_DIR. The header files have to be included in a
# source file using the entire relative path, e.g.,
# @code
# #include <sbia/@PROJECT_NAME_LOWER@/config.h>
# @endcode
# This avoids name conflicts among projects in a more reliable way then only
# changing the order of paths in the include search path and is similar to
# prefixing the file name of header files, but at the time avoids the use
# of such prefixing of the file name itself for the developer.
#
# If this project is a module of another project, it appends its name to the
# already set include prefix. Otherwise, the include prefix is set to the
# common default prefix of BASIS projects first, i.e., "sbia", and then the
# name of the project is appended.
#
# @note If the header file is private, i.e., not required by a public library
#       and thus located in the @c PROJECT_CODE_DIR instead of the
#       @c PROJECT_INCLUDE_DIR and therefore not installed, it can be
#       included without the use of such relative path.
#
# @note The include prefix must end with a trailing slash if it is a
#       subdirectory. BASIS will not use a slash by itself to separate the
#       prefix from the header file name. This behavior eases the transition
#       to a file name prefix if ever desired.
if (NOT PROJECT_IS_MODULE)
  if (BASIS_NAMESPACE)
    set (INCLUDE_PREFIX "${BASIS_NAMESPACE_LOWER}/@PROJECT_NAME_LOWER@/")
  else ()
    set (INCLUDE_PREFIX "@PROJECT_NAME_LOWER@/")
  endif ()
else ()
  set (INCLUDE_PREFIX "${INCLUDE_PREFIX}/@PROJECT_NAME_LOWER@/")
endif ()


## @}
# end of Doxygen group

# ============================================================================
# project directory structure
# ============================================================================

## @addtogroup CMakeAPI
#  @{


# ----------------------------------------------------------------------------
# source tree
# ----------------------------------------------------------------------------

# Note: The project template must follow this directory structure.
#       Ideally, when changing the name of one of these directories,
#       only the directory structure of the tempate needs to be updated.
#       The BASIS CMake functions should not be required to change as they
#       are supposed to use these variables instead of the actual names.

## @brief Absolute path of directory of project sources in source tree.
set (PROJECT_CODE_DIR "@PROJECT_SOURCE_DIR@/src")
## @brief Absolute path of directory of BASIS project configuration in source tree.
set (PROJECT_CONFIG_DIR "@PROJECT_SOURCE_DIR@/config")
## @brief Absolute path of directory of auxiliary data in source tree.
set (PROJECT_DATA_DIR "@PROJECT_SOURCE_DIR@/data")
## @brief Absolute path of directory of documentation files in source tree.
set (PROJECT_DOC_DIR "@PROJECT_SOURCE_DIR@/doc")
## @brief Absolute path of directory of example in source tree.
set (PROJECT_EXAMPLE_DIR "@PROJECT_SOURCE_DIR@/example")
## @brief Absolute path of diretory of public header files in source tree.
set (PROJECT_INCLUDE_DIR "@PROJECT_SOURCE_DIR@/include")
## @brief Absolute path of directory of project modules.
set (PROJECT_MODULES_DIR "@PROJECT_SOURCE_DIR@/modules")
## @brief Absolute path of directory of testing tree in source tree.
set (PROJECT_TESTING_DIR "@PROJECT_SOURCE_DIR@/test")

# ----------------------------------------------------------------------------
# testing tree
# ----------------------------------------------------------------------------

## @brief Absolute path of output directory for tests.
basis_set_if_empty (TESTING_OUTPUT_DIR "@PROJECT_BINARY_DIR@/Testing/Temporary")
## @brief Absolute path of output directory for built test executables.
basis_set_if_empty (TESTING_RUNTIME_DIR "@PROJECT_BINARY_DIR@/Testing/bin")
## @brief Absolute path of output directory for testing libraries.
basis_set_if_empty (TESTING_LIBRARY_DIR "@PROJECT_BINARY_DIR@/Testing/lib")
## @brief Absolute path of output directory for Python modules used for testing.
basis_set_if_empty (TESTING_PYTHON_LIBRARY_DIR "@PROJECT_BINARY_DIR@/Testing/lib/python")
## @brief Absolute path of output directory for Perl modules used for testing.
basis_set_if_empty (TESTING_PERL_LIBRARY_DIR "@PROJECT_BINARY_DIR@/Testing/lib/perl5")

# ----------------------------------------------------------------------------
# build tree
# ----------------------------------------------------------------------------

# set directories corresponding to the source tree directories
foreach (P CODE CONFIG DATA DOC EXAMPLE INCLUDE MODULES TESTING)
  basis_get_relative_path (D "${PROJECT_SOURCE_DIR}" "${PROJECT_${P}_DIR}")
  set (BINARY_${P}_DIR "${PROJECT_BINARY_DIR}/${D}")
endforeach ()

## @brief Absolute path of output directory for main executables.
basis_set_if_empty (BINARY_RUNTIME_DIR "@PROJECT_BINARY_DIR@/bin")
## @brief Absolute path of output directory for auxiliary executables.
basis_set_if_empty (BINARY_LIBEXEC_DIR "@PROJECT_BINARY_DIR@/lib")
## @brief Absolute path of output directory for shared libraries and modules.
basis_set_if_empty (BINARY_LIBRARY_DIR "@PROJECT_BINARY_DIR@/lib")
## @brief Absolute path of output directory for static and import libraries.
basis_set_if_empty (BINARY_ARCHIVE_DIR "@PROJECT_BINARY_DIR@/lib")
## @brief Absolute path of output directory for Python modules.
basis_set_if_empty (BINARY_PYTHON_LIBRARY_DIR "@PROJECT_BINARY_DIR@/lib/python")
## @brief Absolute path of output directory for Perl modules.
basis_set_if_empty (BINARY_PERL_LIBRARY_DIR "@PROJECT_BINARY_DIR@/lib/perl5")

# set default CMake variable which are, however, not used by BASIS
set (CMAKE_RUNTIME_OUTPUT_DIRECTORY "${BINARY_RUNTIME_DIR}")
set (CMAKE_LIBRARY_OUTPUT_DIRECTORY "${BINARY_LIBRARY_DIR}")
set (CMAKE_ARCHIVE_OUTPUT_DIRECTORY "${BINARY_ARCHIVE_DIR}")

# ----------------------------------------------------------------------------
# install tree
# ----------------------------------------------------------------------------

# Attention: In order for CPack to work correctly, the destination paths have
#            to be given relative to CMAKE_INSTALL_PREFIX. Therefore, this
#            prefix must be excluded from the following paths!

# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# prefix / sinfix
# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

# ----------------------------------------------------------------------------
# prefix

# C:/Program Files/Project -> C:/Program Files/SBIA
string (
  REGEX REPLACE
    "/Project$"
    "/${BASIS_NAMESPACE}"
  CMAKE_INSTALL_PREFIX
    "${CMAKE_INSTALL_PREFIX}"
)

## @brief Installation prefix.
set (
  INSTALL_PREFIX
    "${CMAKE_INSTALL_PREFIX}"
  CACHE PATH
    "Prefix used for installation paths."
)

set_property (CACHE CMAKE_INSTALL_PREFIX PROPERTY TYPE INTERNAL)

# ----------------------------------------------------------------------------
# infix

## @brief Whether to use installation sinfix.
option (INSTALL_SINFIX "Whether to use the package-specific installation path suffix/infix." ON)

## @brief Installation sinfix.
if (UNIX)
  set (
    BASIS_INSTALL_SINFIX
      "sbia/@PROJECT_NAME_LOWER@"
    CACHE STRING
      "Suffix/Infix used for installation paths."
  )
else ()
  set (
    BASIS_INSTALL_SINFIX
      "@PROJECT_NAME@"
    CACHE STRING
      "Suffix/Infix used for installation paths."
  )
endif ()
mark_as_advanced (BASIS_INSTALL_SINFIX)

if (INSTALL_SINFIX)
  set_property (CACHE BASIS_INSTALL_SINFIX PROPERTY TYPE STRING)
else ()
  set_property (CACHE BASIS_INSTALL_SINFIX PROPERTY TYPE INTERNAL)
endif ()

# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# package configuration
# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

# Note: CMake's find_package() command considers certain directories.
#       Hence, the variable BASIS_INSTALL_SINFIX which may not comply to
#       the naming of standard locations considered by this command cannot
#       be used here, but a name depending on this package's name must be used.

## @brief Path of installation directory for CMake package configuration
#         files relative to @c INSTALL_PREFIX.
#
# Install configuration files of modules in subdirectories such that
# CMake does not find them by default. Their might be a case that
# someone is using two projects where the one project is named just
# the same as the module of the other project. The configuration file
# of the module is anyway supposed to be included by the package
# configuration file if this module is requested by the COMPONENTS
# argument to the find_package() command.
if (NOT PROJECT_IS_MODULE)
  if (UNIX)
    set (INSTALL_CONFIG_DIR "lib/cmake/@PROJECT_NAME@")
  else ()
    set (INSTALL_CONFIG_DIR "cmake")
  endif ()
else ()
  set (INSTALL_CONFIG_DIR "${INSTALL_CONFIG_DIR}/${PROJECT_NAME}")
endif ()

# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# executable
# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

## @brief Path of installation directory for runtime executables and shared
#         libraries on Windows relative to @c INSTALL_PREFIX.
set (INSTALL_RUNTIME_DIR "bin")

## @brief Path of installation directory for auxiliary executables
#         relative to @c INSTALL_PREFIX.
if (WIN32)
  set (INSTALL_LIBEXEC_DIR "bin")
else ()
  set (INSTALL_LIBEXEC_DIR "lib")
endif ()

# prepend installation sinfix
if (INSTALL_SINFIX)
  foreach (P RUNTIME LIBEXEC)
    set (VAR "INSTALL_${P}_DIR")
    set (${VAR} "${${VAR}}/${BASIS_INSTALL_SINFIX}")
  endforeach ()
endif ()

# prepend module name
if (PROJECT_IS_MODULE)
  foreach (P RUNTIME LIBEXEC)
    set (VAR "INSTALL_${P}_DIR")
    set (${VAR} "${${VAR}}/@PROJECT_NAME@")
  endforeach ()
endif ()

# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# libraries
# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

## @brief Path of installation directory for public header files
#         relative to @c INSTALL_PREFIX.
#
# @note If the @c INCLUDE_PREFIX specifies subdirectories, these will be
#       created underneath this directory during the installation.
set (INSTALL_INCLUDE_DIR "include")

## @brief Path of installation directory for shared libraries on Unix-based
#         systems and module libraries relative to @c INSTALL_PREFIX.
set (INSTALL_LIBRARY_DIR "lib")

## @brief Path of installation directory for static and import libraries
#         relative to @c INSTALL_PREFIX.
set (INSTALL_ARCHIVE_DIR "lib")

# prepend installation sinfix
if (INSTALL_SINFIX)
  foreach (P LIBRARY ARCHIVE)
    set (VAR "INSTALL_${P}_DIR")
    set (${VAR} "${${VAR}}/${BASIS_INSTALL_SINFIX}")
  endforeach ()
endif ()

# prepend module name
if (PROJECT_IS_MODULE)
  foreach (P LIBRARY ARCHIVE)
    set (VAR "INSTALL_${P}_DIR")
    set (${VAR} "${${VAR}}/@PROJECT_NAME@")
  endforeach ()
endif ()

# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# script modules
# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

# Similar to the public header files of C/C++ libraries, the modules written
# in Python or Perl are installed with fixed relative directories which
# correspond to the packages these modules belong to:
#
# Python: sbia.<project>
# Perl:   SBIA::<Project>
#
# As here the project name is already part of the file path and has to
# remain fixed, otherwise the modules would not know how to refer to each
# other in the source code, the variable BASIS_INSTALL_SINFIX is not used here.

## @brief Path of installation directory for Python modules relative to @c INSTALL_PREFIX.
set (INSTALL_PYTHON_LIBRARY_DIR "lib/python")

## @brief Path of installation directory for Perl modules relative to @c INSTALL_PREFIX.
set (INSTALL_PERL_LIBRARY_DIR "lib/perl5")

# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# shared data
# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

## @brief Path of installation directory for shared files
#         relative to @c INSTALL_PREFIX.
set (INSTALL_SHARE_DIR "share")

# prepend installation sinfix
if (INSTALL_SINFIX)
  set (INSTALL_SHARE_DIR "${INSTALL_SHARE_DIR}/${BASIS_INSTALL_SINFIX}")
endif ()

## @brief Path of installation directory for shared data files
#         relative to @c INSTALL_PREFIX.
set (INSTALL_DATA_DIR "${INSTALL_SHARE_DIR}/data")

# prepend module name
if (PROJECT_IS_MODULE)
  set (INSTALL_DATA_DIR "${INSTALL_DATA_DIR}/@PROJECT_NAME@")
endif ()

# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# documentation
# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

## @brief Path of installation directory for documentation files
#         relative to @c INSTALL_PREFIX.
if (UNIX)
  set (INSTALL_DOC_DIR "${INSTALL_SHARE_DIR}/doc")
else ()
  set (INSTALL_DOC_DIR "doc")
endif ()

## @brief Path of installation directory for example files
#         relative to @c INSTALL_PREFIX.
if (UNIX)
  set (INSTALL_EXAMPLE_DIR "${INSTALL_SHARE_DIR}/example")
else ()
  set (INSTALL_EXAMPLE_DIR "example")
endif ()

## @brief Path of installation directory for man pages
#         relative to @c INSTALL_PREFIX.
if (UNIX)
  set (INSTALL_MAN_DIR "${INSTALL_SHARE_DIR}/man")
else ()
  set (INSTALL_MAN_DIR "man")
endif ()

# prepend installation sinfix
if (WIN32 AND INSTALL_SINFIX)
  foreach (P DOC EXAMPLE MAN)
    set (VAR "INSTALL_${P}_DIR")
    set (${VAR} "${${VAR}}/${BASIS_INSTALL_SINFIX}")
  endforeach ()
endif ()

# prepend module name
if (PROJECT_IS_MODULE)
  foreach (P DOC EXAMPLE MAN)
    set (VAR "INSTALL_${P}_DIR")
    set (${VAR} "${${VAR}}/@PROJECT_NAME@")
  endforeach ()
endif ()

# ============================================================================
# build configuration(s)
# ============================================================================

## @brief List of all available/supported build configurations.
set (
  CMAKE_CONFIGURATION_TYPES
    "Debug"
    "Coverage"
    "Release"
  CACHE STRING "Build configurations." FORCE
)

## @brief List of debug configurations.
#
# Used by the target_link_libraries() CMake command, for example,
# to determine whether to link to the optimized or debug libraries.
set (DEBUG_CONFIGURATIONS "Debug")

mark_as_advanced (CMAKE_CONFIGURATION_TYPES)
mark_as_advanced (DEBUG_CONFIGURATIONS)

if (NOT CMAKE_BUILD_TYPE MATCHES "^Debug$|^Coverage$|^Release$")
  if (NOT CMAKE_BUILD_TYPE STREQUAL "")
    message ("Invalid build type ${CMAKE_BUILD_TYPE}! Setting CMAKE_BUILD_TYPE to Release.")
  endif ()
  set (CMAKE_BUILD_TYPE "Release")
endif ()

## @brief Current build configuration for GNU Make Makefiles generator.
set (
  CMAKE_BUILD_TYPE
    "${CMAKE_BUILD_TYPE}"
  CACHE STRING
    "Current build configuration. Specify either \"Debug\", \"Coverage\", or \"Release\"."
  FORCE
)

# set the possible values of build type for cmake-gui
set_property (CACHE CMAKE_BUILD_TYPE PROPERTY STRINGS "Debug" "Release" "Coverage")

# ----------------------------------------------------------------------------
# disabled configurations
# ----------------------------------------------------------------------------

# disable support for MinSizeRel and RelWithDebInfo
foreach (C MINSIZEREL RELWITHDEBINFO)
  # compiler flags
  set_property (CACHE CMAKE_C_FLAGS_${C} PROPERTY TYPE INTERNAL)
  set_property (CACHE CMAKE_CXX_FLAGS_${C} PROPERTY TYPE INTERNAL)

  # linker flags
  set_property (CACHE CMAKE_EXE_LINKER_FLAGS_${C} PROPERTY TYPE INTERNAL)
  set_property (CACHE CMAKE_MODULE_LINKER_FLAGS_${C} PROPERTY TYPE INTERNAL)
  set_property (CACHE CMAKE_SHARED_LINKER_FLAGS_${C} PROPERTY TYPE INTERNAL)
endforeach ()

# disable support for plain C
set_property (CACHE CMAKE_C_FLAGS PROPERTY TYPE INTERNAL)
foreach (C DEBUG RELEASE)
  set_property (CACHE CMAKE_C_FLAGS_${C} PROPERTY TYPE INTERNAL)
endforeach ()

unset (C)

# ----------------------------------------------------------------------------
# common
# ----------------------------------------------------------------------------

# common compiler flags
set (CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS}")

# common linker flags
set (CMAKE_EXE_LINKER_FLAGS    "${CMAKE_LINKER_FLAGS}")
set (CMAKE_MODULE_LINKER_FLAGS "${CMAKE_LINKER_FLAGS}")
set (CMAKE_SHARED_LINKER_FLAGS "${CMAKE_LINKER_FLAGS}")

# ----------------------------------------------------------------------------
# Debug
# ----------------------------------------------------------------------------

# compiler flags of Debug configuration
set (CMAKE_CXX_FLAGS_DEBUG "${CMAKE_CXX_FLAGS_DEBUG}")

# linker flags of Debug configuration
set (CMAKE_EXE_LINKER_FLAGS_DEBUG    "${CMAKE_EXE_LINKER_FLAGS_DEBUG}")
set (CMAKE_MODULE_LINKER_FLAGS_DEBUG "${CMAKE_MODULE_LINKER_FLAGS_DEBUG}")
set (CMAKE_SHARED_LINKER_FLAGS_DEBUG "${CMAKE_SHARED_LINKER_FLAGS_DEBUG}")

# ----------------------------------------------------------------------------
# Release
# ----------------------------------------------------------------------------

# compiler flags of Release configuration
set (CMAKE_CXX_FLAGS_RELEASE "${CMAKE_CXX_FLAGS_RELEASE}")

# linker flags of Release configuration
set (CMAKE_EXE_LINKER_FLAGS_RELEASE    "${CMAKE_EXE_LINKER_FLAGS_RELEASE}")
set (CMAKE_MODULE_LINKER_FLAGS_RELEASE "${CMAKE_MODULE_LINKER_FLAGS_RELEASE}")
set (CMAKE_SHARED_LINKER_FLAGS_RELEASE "${CMAKE_SHARED_LINKER_FLAGS_RELEASE}")

# ----------------------------------------------------------------------------
# Coverage
# ----------------------------------------------------------------------------

# compiler flags for Coverage configuration
set (CMAKE_C_FLAGS_COVERAGE "" CACHE INTERNAL "" FORCE)
set (CMAKE_CXX_FLAGS_COVERAGE "-g -O0 -Wall -W -fprofile-arcs -ftest-coverage")

# linker flags for Coverage configuration
set (CMAKE_EXE_LINKER_FLAGS_COVERAGE    "-fprofile-arcs -ftest-coverage")
set (CMAKE_MODULE_LINKER_FLAGS_COVERAGE "-fprofile-arcs -ftest-coverage")
set (CMAKE_SHARED_LINKER_FLAGS_COVERAGE "-fprofile-arcs -ftest-coverage")

# ============================================================================
# project properties
# ============================================================================

# The following variables are used across BASIS macros and functions. They
# in particular remember information added by one function or macro which
# is required by another function or macro.
#
# These variables need to be properties such that they can be set in
# subdirectories. Moreover, they have to be assigned with the project's
# root source directory such that a super-project's properties are restored
# after this subproject is finalized such that the super-project itself can
# be finalized properly.

## @brief List of all include directories used by project.
basis_set_project_property (PROJECT_INCLUDE_DIRS "")
## @brief List of all build targets.
basis_set_project_property (TARGETS "")
## @brief List of all exported targets.
basis_set_project_property (EXPORT_TARGETS "")
## @brief List of all exported custom BASIS targets.
basis_set_project_property (CUSTOM_EXPORT_TARGETS "")
## @brief Whether this project makes use of the BASIS Java utilities.
basis_set_project_property (PROJECT_USES_JAVA_UTILITIES   FALSE)
## @brief Whether this project makes use of the BASIS Python utilities.
basis_set_project_property (PROJECT_USES_PYTHON_UTILITIES FALSE)
## @brief Whether this project makes use of the BASIS Perl utilities.
basis_set_project_property (PROJECT_USES_PERL_UTILITIES   FALSE)
## @brief Whether this project makes use of the BASIS BASH utilities.
basis_set_project_property (PROJECT_USES_BASH_UTILITIES   FALSE)
## @brief Whether this project makes use of the BASIS MATLAB utilities.
basis_set_project_property (PROJECT_USES_MATLAB_UTILITIES FALSE)

# ============================================================================
# common options
# ============================================================================

## @addtogroup CMakeAPI
#  @{


## @brief Request verbose messages from BASIS functions.
option (BASIS_VERBOSE "Request BASIS functions to output verbose messages." OFF)
mark_as_advanced (BASIS_VERBOSE)

## @brief Request debugging messages from BASIS functions.
option (BASIS_DEBUG "Request BASIS functions to help debugging." OFF)
mark_as_advanced (BASIS_DEBUG)

## @brief Request build/installation of documentation.
#
# @note In case of the API documentation, enabling this option does not
#       add the 'doc' target to the 'all' build target. In order to build
#       the API documentation, the 'doc' target has to be build.
if (EXISTS "${PROJECT_DOC_DIR}")
  option (BUILD_DOCUMENTATION "Request build and/or installation of documentation." ON)
endif ()

## @brief Request build/installation of example.
if (EXISTS ${PROJECT_EXAMPLE_DIR})
  option (BUILD_EXAMPLE "Request build and/or installation of example." ON)
endif ()

## @brief Request installation of symbolic links.
#
# @note This option is not available on Windows.
if (UNIX)
  option (INSTALL_LINKS "Request installation of (symbolic) links." ON)
endif ()


## @}
# end of Doxygen group

## @}
# end of Doxygen group
