/*!
 * \file  mainaux.h
 * \brief Auxiliary functions useful for implementation of main () function.
 *
 * Copyright (c) 2011 University of Pennsylvania. All rights reserved.
 * See LICENSE file in project root or 'doc' directory for details.
 *
 * Contact: SBIA Group <sbia-software -at- uphs.upenn.edu>
 */

#pragma once
#ifndef __@PROJECT_NAME@_MAINAUX_H
#define __@PROJECT_NAME@_MAINAUX_H


#include <stdio.h>

#include "config.h"


/*!
 * \brief Extract program name from first command line argument.
 *
 * \param argv Command line arguments.
 *
 * \return Program name without relative or absolute path to directory where
 *         the executable is located. Do not try to free the memory of the
 *         returned pointer! It just points to the first character of the
 *         program name within argv [0].        
 */
inline
const char *getProgName (char *argv[])
{
	const char *progName = argv [0];

	if (progName && *progName)
	{
		// go to last character of string
		while (*progName) ++progName;
		--progName;
		// rewind until beginning of string or
		// '/' (UNIX) or '\\' (WIN) is encountered
		while (progName != argv [0])
		{
			--progName;
			if (*progName == '/' || *progName == '\\')
			{
				++progName;
				break;
			}
		}
	}

	return progName;
}

/*!
 * \brief Prints version information.
 *
 * \param progName Name of program.
 */
inline
void version (const char *progName)
{
	printf ("%s %s", progName, @PROJECT_NAME_UPPER@_VERSION);
#if @PROJECT_NAME_UPPER@_REVISION
	printf (" (Rev. %d)", @PROJECT_NAME_UPPER@_REVISION);
#endif
	printf ("\n");
}


#endif // __@PROJECT_NAME@_MAINAUX_H
